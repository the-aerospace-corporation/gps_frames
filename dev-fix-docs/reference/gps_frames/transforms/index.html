
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Reference frames representations and transformations">
      
      
        <meta name="author" content="David William Allen">
      
      
        <link rel="canonical" href="https://the-aerospace-corporation.github.io/gps_frames/dev-fix-docs/reference/gps_frames/transforms/">
      
      
        <link rel="prev" href="../rotations/">
      
      
        <link rel="next" href="../vectors/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Transforms - GPS Frames</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.484c7ddc.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#transforms" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="GPS Frames" class="md-header__button md-logo" aria-label="GPS Frames" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            GPS Frames
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Transforms
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/the-aerospace-corporation/gps_frames" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    gps_frames
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="GPS Frames" class="md-nav__button md-logo" aria-label="GPS Frames" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    GPS Frames
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/the-aerospace-corporation/gps_frames" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    gps_frames
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" checked>
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    gps_frames
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    gps_frames
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    API Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Basis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../parameters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Parameters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../paths/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Paths
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../position/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Position
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rotations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rotations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Transforms
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Transforms
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gps_frames.transforms" class="md-nav__link">
    <span class="md-ellipsis">
      
        transforms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="transforms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.VALID_FRAMES" class="md-nav__link">
    <span class="md-ellipsis">
      
        VALID_FRAMES
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.add_weeks_eci" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_weeks_eci
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.ecef2eci" class="md-nav__link">
    <span class="md-ellipsis">
      
        ecef2eci
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.ecef2lla" class="md-nav__link">
    <span class="md-ellipsis">
      
        ecef2lla
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.eci2ecef" class="md-nav__link">
    <span class="md-ellipsis">
      
        eci2ecef
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.eci2lla" class="md-nav__link">
    <span class="md-ellipsis">
      
        eci2lla
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.lla2ecef" class="md-nav__link">
    <span class="md-ellipsis">
      
        lla2ecef
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.lla2eci" class="md-nav__link">
    <span class="md-ellipsis">
      
        lla2eci
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.position_transform" class="md-nav__link">
    <span class="md-ellipsis">
      
        position_transform
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.rotate_ecef" class="md-nav__link">
    <span class="md-ellipsis">
      
        rotate_ecef
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.velocity_transform" class="md-nav__link">
    <span class="md-ellipsis">
      
        velocity_transform
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vectors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../velocity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Velocity
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../example_walkthrough/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ranging Walkthrough
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../case_study/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Satellite Tracking Case Study
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#gps_frames.transforms" class="md-nav__link">
    <span class="md-ellipsis">
      
        transforms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="transforms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.VALID_FRAMES" class="md-nav__link">
    <span class="md-ellipsis">
      
        VALID_FRAMES
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.add_weeks_eci" class="md-nav__link">
    <span class="md-ellipsis">
      
        add_weeks_eci
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.ecef2eci" class="md-nav__link">
    <span class="md-ellipsis">
      
        ecef2eci
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.ecef2lla" class="md-nav__link">
    <span class="md-ellipsis">
      
        ecef2lla
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.eci2ecef" class="md-nav__link">
    <span class="md-ellipsis">
      
        eci2ecef
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.eci2lla" class="md-nav__link">
    <span class="md-ellipsis">
      
        eci2lla
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.lla2ecef" class="md-nav__link">
    <span class="md-ellipsis">
      
        lla2ecef
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.lla2eci" class="md-nav__link">
    <span class="md-ellipsis">
      
        lla2eci
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.position_transform" class="md-nav__link">
    <span class="md-ellipsis">
      
        position_transform
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.rotate_ecef" class="md-nav__link">
    <span class="md-ellipsis">
      
        rotate_ecef
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gps_frames.transforms.velocity_transform" class="md-nav__link">
    <span class="md-ellipsis">
      
        velocity_transform
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="transforms">Transforms</h1>


<div class="doc doc-object doc-module">



<h2 id="gps_frames.transforms" class="doc doc-heading">
            <code>gps_frames.transforms</code>


</h2>

    <div class="doc doc-contents first">

        <p>Frame Transformations.</p>
<p>This submodule contains the mathematics used for translating between different
frames.</p>


<details class="todo" open>
  <summary>Todo</summary>
  <ul>
<li>Incorporate non-GPS standard frames, e.g. J2000</li>
<li>Include velocity transformations into the LLA frame</li>
<li>Add local coordinate systems, e.g. ENU</li>
<li>Make GPSTime JIT-able</li>
<li>Fix ECEF to LLA warning (currently a print for numba compatibility)</li>
</ul>
</details>









<div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="gps_frames.transforms.VALID_FRAMES" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">VALID_FRAMES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ECI&#39;</span><span class="p">,</span> <span class="s1">&#39;ECEF&#39;</span><span class="p">,</span> <span class="s1">&#39;LLA&#39;</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The frames implemented for this toolbox</p>
<p>This list contains the names of the frames available in this module. These
frames are</p>
<ul>
<li>ECI: The ECI frame aligned with the ECEF frame at the start of the week.
    When used, the coordinates refer to the X, Y, and Z positions in the
    frame in meters</li>
<li>ECEF: The ECEF frame. When used, the coordinates refer to the X, Y, and
    Z positions in the frame in meters</li>
<li>LLA: The WGS84 Latitude, Longitude, and Altitude. When used, the
    coordinates refer to the Latitude, Longitude, and Altitude in radians or
    meters as appropriate</li>
</ul>


<details class="note" open>
  <summary>Notes</summary>
  <p>For consistency, all names must be in all caps.</p>
</details>
    </div>

</div>




<div class="doc doc-object doc-function">


<h3 id="gps_frames.transforms.add_weeks_eci" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">add_weeks_eci</span><span class="p">(</span><span class="n">num_weeks</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Move ECI frame to new week.</p>
<p>Because the ECI frame is reference to the start of the week, if the frame
is moved to a new week, the coordinates change. The purpose of this
function is to update the ECI frame by moving forward <code>num_weeks</code> weeks
(or backward is <code>num_weeks</code> is negative.</p>
<p>This is accomplished by rotating the frame about the 3 axis by an angle of
<span class="arithmatex">\(\omega_{\oplus}T\)</span> where <span class="arithmatex">\(\omega_{\oplus}\)</span> is the angular velocity
of the Earth and <span class="arithmatex">\(T\)</span> is the length of a week times the number of weeks
to advance.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>num_weeks</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The number of weeks to advance the ECI frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>coordinates</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the initial ECI frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the new ECI frame</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>standard_rotation_matrix: Used to get the rotation matrix for the
    transformation</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>gps_frames/transforms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">566</span>
<span class="normal">567</span>
<span class="normal">568</span>
<span class="normal">569</span>
<span class="normal">570</span>
<span class="normal">571</span>
<span class="normal">572</span>
<span class="normal">573</span>
<span class="normal">574</span>
<span class="normal">575</span>
<span class="normal">576</span>
<span class="normal">577</span>
<span class="normal">578</span>
<span class="normal">579</span>
<span class="normal">580</span>
<span class="normal">581</span>
<span class="normal">582</span>
<span class="normal">583</span>
<span class="normal">584</span>
<span class="normal">585</span>
<span class="normal">586</span>
<span class="normal">587</span>
<span class="normal">588</span>
<span class="normal">589</span>
<span class="normal">590</span>
<span class="normal">591</span>
<span class="normal">592</span>
<span class="normal">593</span>
<span class="normal">594</span>
<span class="normal">595</span>
<span class="normal">596</span>
<span class="normal">597</span>
<span class="normal">598</span>
<span class="normal">599</span>
<span class="normal">600</span>
<span class="normal">601</span>
<span class="normal">602</span>
<span class="normal">603</span>
<span class="normal">604</span>
<span class="normal">605</span>
<span class="normal">606</span>
<span class="normal">607</span>
<span class="normal">608</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jit</span><span class="p">(</span><span class="s2">&quot;float64[:](int64, float64[:])&quot;</span><span class="p">,</span> <span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">add_weeks_eci</span><span class="p">(</span><span class="n">num_weeks</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Move ECI frame to new week.</span>

<span class="sd">    Because the ECI frame is reference to the start of the week, if the frame</span>
<span class="sd">    is moved to a new week, the coordinates change. The purpose of this</span>
<span class="sd">    function is to update the ECI frame by moving forward `num_weeks` weeks</span>
<span class="sd">    (or backward is `num_weeks` is negative.</span>

<span class="sd">    This is accomplished by rotating the frame about the 3 axis by an angle of</span>
<span class="sd">    \(\omega_{\oplus}T\) where \(\omega_{\oplus}\) is the angular velocity</span>
<span class="sd">    of the Earth and \(T\) is the length of a week times the number of weeks</span>
<span class="sd">    to advance.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    num_weeks : int</span>
<span class="sd">        The number of weeks to advance the ECI frame</span>
<span class="sd">    coordinates : np.ndarray</span>
<span class="sd">        The coordinates in the initial ECI frame</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The coordinates in the new ECI frame</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    standard_rotation_matrix: Used to get the rotation matrix for the</span>
<span class="sd">        transformation</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">num_weeks</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">coordinates</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># How far the Earth rotates in a week</span>
        <span class="c1"># coordinates = np.array(coordinates, dtype=float)</span>
        <span class="n">weekly_eci_rotation</span> <span class="o">=</span> <span class="n">_w_e</span> <span class="o">*</span> <span class="mi">604800</span> <span class="o">*</span> <span class="n">num_weeks</span>

        <span class="c1"># rotation = Rotation(</span>
        <span class="c1">#     dcm=standard_rotation_matrix(3, weekly_eci_rotation))</span>

        <span class="k">return</span> <span class="n">standard_rotation</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">weekly_eci_rotation</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="gps_frames.transforms.ecef2eci" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ecef2eci</span><span class="p">(</span><span class="n">ecef_coordinates</span><span class="p">,</span> <span class="n">time_of_week</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Rotate from the ECEF to the ECI frame.</p>
<p>This function rotates the ECEF coordinates into the ECI frame. Note that
the ECI and ECEF frames are aligned at the start of the week.</p>
<p>Let <span class="arithmatex">\(\mathbf{r}^{\mathcal{F}}\)</span> be the position in the ECEF frame
and <span class="arithmatex">\(t\)</span> be the time of week. The angle of rotation between the ECI and
ECEF frames is <span class="arithmatex">\(\Theta = \omega_{\oplus}t\)</span>, with <span class="arithmatex">\(\omega_{\oplus}\)</span>
being the angular velocity of the Earth. Thus, the position in the ECI
coordinates is</p>
<div class="arithmatex">\[
    \mathbf{r}^{\mathcal{N}} =
        \left[\begin{array}{ccc}
            \cos -\Theta &amp; \sin -\Theta &amp; 0 \\
            -\sin -\Theta &amp; \cos -\Theta &amp; 0 \\
            0 &amp; 0 &amp; 1
        \end{array}\right]\mathbf{r}^{\mathcal{F}}
    =
        \left[\begin{array}{ccc}
            \cos \Theta &amp; -\sin \Theta &amp; 0 \\
            \sin \Theta &amp; \cos \Theta &amp; 0 \\
            0 &amp; 0 &amp; 1
        \end{array}\right]\mathbf{r}^{\mathcal{F}}
\]</div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ecef_coordinates</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the ECEF frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_of_week</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time of week in seconds associated with the ECEF frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the ECI frame</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>standard_rotation_matrix: Used to get the rotation matrix for the
    transformation</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>gps_frames/transforms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jit</span><span class="p">(</span><span class="s2">&quot;float64[:](float64[:], float64)&quot;</span><span class="p">,</span> <span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">ecef2eci</span><span class="p">(</span><span class="n">ecef_coordinates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">time_of_week</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Rotate from the ECEF to the ECI frame.</span>

<span class="sd">    This function rotates the ECEF coordinates into the ECI frame. Note that</span>
<span class="sd">    the ECI and ECEF frames are aligned at the start of the week.</span>

<span class="sd">    Let \(\mathbf{r}^{\mathcal{F}}\) be the position in the ECEF frame</span>
<span class="sd">    and \(t\) be the time of week. The angle of rotation between the ECI and</span>
<span class="sd">    ECEF frames is \(\Theta = \omega_{\oplus}t\), with \(\omega_{\oplus}\)</span>
<span class="sd">    being the angular velocity of the Earth. Thus, the position in the ECI</span>
<span class="sd">    coordinates is</span>

<span class="sd">    $$</span>
<span class="sd">        \mathbf{r}^{\mathcal{N}} =</span>
<span class="sd">            \left[\begin{array}{ccc}</span>
<span class="sd">                \cos -\Theta &amp; \sin -\Theta &amp; 0 \\</span>
<span class="sd">                -\sin -\Theta &amp; \cos -\Theta &amp; 0 \\</span>
<span class="sd">                0 &amp; 0 &amp; 1</span>
<span class="sd">            \end{array}\right]\mathbf{r}^{\mathcal{F}}</span>
<span class="sd">        =</span>
<span class="sd">            \left[\begin{array}{ccc}</span>
<span class="sd">                \cos \Theta &amp; -\sin \Theta &amp; 0 \\</span>
<span class="sd">                \sin \Theta &amp; \cos \Theta &amp; 0 \\</span>
<span class="sd">                0 &amp; 0 &amp; 1</span>
<span class="sd">            \end{array}\right]\mathbf{r}^{\mathcal{F}}</span>
<span class="sd">    $$</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ecef_coordinates : np.ndarray</span>
<span class="sd">        The coordinates in the ECEF frame</span>
<span class="sd">    time_of_week : float</span>
<span class="sd">        The time of week in seconds associated with the ECEF frame</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The coordinates in the ECI frame</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    standard_rotation_matrix: Used to get the rotation matrix for the</span>
<span class="sd">        transformation</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Angle from the ECI to the ECEF frame</span>
    <span class="n">angle_of_rotation</span> <span class="o">=</span> <span class="n">_w_e</span> <span class="o">*</span> <span class="n">time_of_week</span>
    <span class="c1"># rotation = Rotation(axis=np.array((0., 0., 1.)), angle=-angle_of_rotation)</span>

    <span class="k">return</span> <span class="n">standard_rotation</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="n">angle_of_rotation</span><span class="p">,</span> <span class="n">ecef_coordinates</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="gps_frames.transforms.ecef2lla" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">ecef2lla</span><span class="p">(</span><span class="n">ecef_coordinates</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Transform an ECEF position to LLA position.</p>
<p>The purpose of this function is to convert a position in the ECEF frame to
the LLA frame relative to the WGS84 ellipsoid. Let the coordinates in the
ECEF frame be
<span class="arithmatex">\(\mathbf{r}^{\mathcal{F}} = [r_{x}, r_{y}, r_{z}]^{T}\)</span>. The
longitude is calculated as</p>
<div class="arithmatex">\[
    \phi = \arctan\left(\frac{p_{y}}{p_{x}}\right)
\]</div>
<p>Note that a 4-quadrant arctangent function should be used to avoid
ambiguity.</p>
<p>The latitude cannot be solved analytically and must be solved numerically.
The initial guesses for the geodetic latitude <span class="arithmatex">\(\lambda\)</span> and reduced
latitude <span class="arithmatex">\(\beta\)</span> are</p>
<div class="arithmatex">\[
    \begin{split}
        \beta = &amp; \arctan\left(\frac{p_{z}}{(1-f)s}\right) \\
        \lambda = &amp; \arctan\left(
                \frac{
                    p_{z} + \frac{e^{2}(1-f)}{1-e^{2}}a\sin^{3}\beta
                }{
                    s - e^{2}a\cos^{3}\beta
                }
            \right)
    \end{split}
\]</div>
<p>where <span class="arithmatex">\(a\)</span> is the semi-major axis of the WGS84 ellipsoid, <span class="arithmatex">\(f\)</span> is the
flattening of the ellipsoid, <span class="arithmatex">\(e^{2}=1-(1-f)^{2}\)</span>, and
<span class="arithmatex">\(s = \sqrt{p_{x}^{2} + p_{y}^{2}}\)</span>.</p>
<p>Using the initial guesses, an update to the reduced latitude can be
calculated as</p>
<div class="arithmatex">\[
    \beta = \arctan\left(
            \frac{(1 - f)\sin\lambda}{\cos\lambda}
        \right)
\]</div>
<p>which can in turn be used to update <span class="arithmatex">\(\lambda\)</span>. This cycle continues
until <span class="arithmatex">\(\lambda\)</span> converges ([1]_ claims this usually takes 2-3
iterations).</p>
<p>From here, it is possible to compute the altitude directly:</p>
<div class="arithmatex">\[
    h = s \cos\lambda + (p_{z} + e^{2}n\sin\lambda)\sin\lambda - n
\]</div>
<p>where <span class="arithmatex">\(n\)</span> is the radius of curvature in the vertical prime</p>
<div class="arithmatex">\[
    n = \frac{a}{\sqrt{1 - (e\sin\lambda)^{2}}}
\]</div>
<p>This function is based on the development provided by [1]_</p>
<div class="admonition quote">
<p class="admonition-title">Todo</p>
<p>If the latitude does not converge, this function prints a warning 
instead of using the logger. This is necessary because of use of
Numba. In the future, this should be changed to logging a warning
message.</p>
</div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>ecef_coordinates</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the ECEF frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The latitude, longitude, altitude coordinates.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="references" open>
  <summary>References</summary>
  <p>.. [1] MathWorks Aerospace Blockset
    https://www.mathworks.com/help/aeroblks/ecefpositiontolla.html</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>gps_frames/transforms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jit</span><span class="p">(</span><span class="s2">&quot;float64[:](float64[:])&quot;</span><span class="p">,</span> <span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">ecef2lla</span><span class="p">(</span><span class="n">ecef_coordinates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Transform an ECEF position to LLA position.</span>

<span class="sd">    The purpose of this function is to convert a position in the ECEF frame to</span>
<span class="sd">    the LLA frame relative to the WGS84 ellipsoid. Let the coordinates in the</span>
<span class="sd">    ECEF frame be</span>
<span class="sd">    \(\mathbf{r}^{\mathcal{F}} = [r_{x}, r_{y}, r_{z}]^{T}\). The</span>
<span class="sd">    longitude is calculated as</span>

<span class="sd">    $$</span>
<span class="sd">        \phi = \arctan\left(\frac{p_{y}}{p_{x}}\right)</span>
<span class="sd">    $$</span>

<span class="sd">    Note that a 4-quadrant arctangent function should be used to avoid</span>
<span class="sd">    ambiguity.</span>

<span class="sd">    The latitude cannot be solved analytically and must be solved numerically.</span>
<span class="sd">    The initial guesses for the geodetic latitude \(\lambda\) and reduced</span>
<span class="sd">    latitude \(\beta\) are</span>

<span class="sd">    $$</span>
<span class="sd">        \begin{split}</span>
<span class="sd">            \beta = &amp; \arctan\left(\frac{p_{z}}{(1-f)s}\right) \\</span>
<span class="sd">            \lambda = &amp; \arctan\left(</span>
<span class="sd">                    \frac{</span>
<span class="sd">                        p_{z} + \frac{e^{2}(1-f)}{1-e^{2}}a\sin^{3}\beta</span>
<span class="sd">                    }{</span>
<span class="sd">                        s - e^{2}a\cos^{3}\beta</span>
<span class="sd">                    }</span>
<span class="sd">                \right)</span>
<span class="sd">        \end{split}</span>
<span class="sd">    $$</span>

<span class="sd">    where \(a\) is the semi-major axis of the WGS84 ellipsoid, \(f\) is the</span>
<span class="sd">    flattening of the ellipsoid, \(e^{2}=1-(1-f)^{2}\), and</span>
<span class="sd">    \(s = \sqrt{p_{x}^{2} + p_{y}^{2}}\).</span>

<span class="sd">    Using the initial guesses, an update to the reduced latitude can be</span>
<span class="sd">    calculated as</span>

<span class="sd">    $$</span>
<span class="sd">        \beta = \arctan\left(</span>
<span class="sd">                \frac{(1 - f)\sin\lambda}{\cos\lambda}</span>
<span class="sd">            \right)</span>
<span class="sd">    $$</span>

<span class="sd">    which can in turn be used to update \(\lambda\). This cycle continues</span>
<span class="sd">    until \(\lambda\) converges ([1]_ claims this usually takes 2-3</span>
<span class="sd">    iterations).</span>

<span class="sd">    From here, it is possible to compute the altitude directly:</span>

<span class="sd">    $$</span>
<span class="sd">        h = s \cos\lambda + (p_{z} + e^{2}n\sin\lambda)\sin\lambda - n</span>
<span class="sd">    $$</span>

<span class="sd">    where \(n\) is the radius of curvature in the vertical prime</span>

<span class="sd">    $$</span>
<span class="sd">        n = \frac{a}{\sqrt{1 - (e\sin\lambda)^{2}}}</span>
<span class="sd">    $$</span>

<span class="sd">    This function is based on the development provided by [1]_</span>

<span class="sd">    !!! quote &quot;Todo&quot;</span>
<span class="sd">        If the latitude does not converge, this function prints a warning </span>
<span class="sd">        instead of using the logger. This is necessary because of use of</span>
<span class="sd">        Numba. In the future, this should be changed to logging a warning</span>
<span class="sd">        message.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ecef_coordinates : np.ndarray</span>
<span class="sd">        The coordinates in the ECEF frame</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The latitude, longitude, altitude coordinates.</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] MathWorks Aerospace Blockset</span>
<span class="sd">        https://www.mathworks.com/help/aeroblks/ecefpositiontolla.html</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">ecef_coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">ecef_coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">z</span> <span class="o">=</span> <span class="n">ecef_coordinates</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="n">longitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>

    <span class="n">max_iterations</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="n">desired_accuracy</span> <span class="o">=</span> <span class="mf">1e-15</span>

    <span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">y</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">beta</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">z</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">_wgs84f</span><span class="p">)</span> <span class="o">*</span> <span class="n">s</span><span class="p">)</span>
    <span class="n">latitude</span> <span class="o">=</span> <span class="n">_ecef2lla_latitude_func</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">ii</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">max_iterations</span><span class="p">):</span>
        <span class="n">old_latitude</span> <span class="o">=</span> <span class="n">latitude</span>

        <span class="n">beta</span> <span class="o">=</span> <span class="n">_ecef2lla_beta_func</span><span class="p">(</span><span class="n">latitude</span><span class="p">)</span>
        <span class="n">latitude</span> <span class="o">=</span> <span class="n">_ecef2lla_latitude_func</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">beta</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">latitude</span> <span class="o">-</span> <span class="n">old_latitude</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">desired_accuracy</span><span class="p">:</span>
            <span class="k">break</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;ecef2lla &gt;&gt; WARNING: latitude did not converge: &quot;</span><span class="p">,</span>
            <span class="n">latitude</span> <span class="o">-</span> <span class="n">old_latitude</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1"># logger.debug(f&quot;ecef2lla took {ii} iterations to converge.&quot;)</span>

    <span class="n">n</span> <span class="o">=</span> <span class="n">_wgs84a</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">_wgs84ecc</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">latitude</span><span class="p">)</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">altitude</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">s</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">latitude</span><span class="p">)</span>
        <span class="o">+</span> <span class="p">(</span><span class="n">z</span> <span class="o">+</span> <span class="n">_wgs84ecc</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">n</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">latitude</span><span class="p">))</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">latitude</span><span class="p">)</span>
        <span class="o">-</span> <span class="n">n</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">altitude</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="gps_frames.transforms.eci2ecef" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eci2ecef</span><span class="p">(</span><span class="n">eci_coordinates</span><span class="p">,</span> <span class="n">time_of_week</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Rotate from the ECI to the ECEF frame.</p>
<p>This function rotates the ECI coordinates into the ECEF frame. Note that
the ECI and ECEF frames are aligned at the start of the week.</p>
<p>Let <span class="arithmatex">\(\mathbf{r}^{\mathcal{N}}\)</span> be the position in the ECI frame
and <span class="arithmatex">\(t\)</span> be the time of week. The angle of rotation between the ECI and
ECEF frames is <span class="arithmatex">\(\Theta = \omega_{\oplus}t\)</span>, with <span class="arithmatex">\(\omega_{\oplus}\)</span>
being the angular velocity of the Earth. Thus, the position in the ECEF
coordinates is</p>
<div class="arithmatex">\[
    \mathbf{r}^{\mathcal{F}} =
        \left[\begin{array}{ccc}
            \cos \Theta &amp; \sin \Theta &amp; 0 \\
            -\sin \Theta &amp; \cos \Theta &amp; 0 \\
            0 &amp; 0 &amp; 1
        \end{array}\right]\mathbf{r}^{\mathcal{N}}
\]</div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>eci_coordinates</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the ECI frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time_of_week</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time of week in seconds associated with the ECEF frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the ECI frame</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>standard_rotation_matrix: Used to get the rotation matrix for the
    transformation</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>gps_frames/transforms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jit</span><span class="p">(</span><span class="s2">&quot;float64[:](float64[:], float64)&quot;</span><span class="p">,</span> <span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">eci2ecef</span><span class="p">(</span><span class="n">eci_coordinates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">time_of_week</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Rotate from the ECI to the ECEF frame.</span>

<span class="sd">    This function rotates the ECI coordinates into the ECEF frame. Note that</span>
<span class="sd">    the ECI and ECEF frames are aligned at the start of the week.</span>

<span class="sd">    Let \(\mathbf{r}^{\mathcal{N}}\) be the position in the ECI frame</span>
<span class="sd">    and \(t\) be the time of week. The angle of rotation between the ECI and</span>
<span class="sd">    ECEF frames is \(\Theta = \omega_{\oplus}t\), with \(\omega_{\oplus}\)</span>
<span class="sd">    being the angular velocity of the Earth. Thus, the position in the ECEF</span>
<span class="sd">    coordinates is</span>

<span class="sd">    $$</span>
<span class="sd">        \mathbf{r}^{\mathcal{F}} =</span>
<span class="sd">            \left[\begin{array}{ccc}</span>
<span class="sd">                \cos \Theta &amp; \sin \Theta &amp; 0 \\</span>
<span class="sd">                -\sin \Theta &amp; \cos \Theta &amp; 0 \\</span>
<span class="sd">                0 &amp; 0 &amp; 1</span>
<span class="sd">            \end{array}\right]\mathbf{r}^{\mathcal{N}}</span>
<span class="sd">    $$</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    eci_coordinates : np.ndarray</span>
<span class="sd">        The coordinates in the ECI frame</span>
<span class="sd">    time_of_week : float</span>
<span class="sd">        The time of week in seconds associated with the ECEF frame</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The coordinates in the ECI frame</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    standard_rotation_matrix: Used to get the rotation matrix for the</span>
<span class="sd">        transformation</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Angle from the ECI to the ECEF frame</span>
    <span class="n">angle_of_rotation</span> <span class="o">=</span> <span class="n">_w_e</span> <span class="o">*</span> <span class="n">time_of_week</span>
    <span class="c1"># rotation = Rotation(axis=np.array((0., 0., 1.)), angle=angle_of_rotation)</span>

    <span class="k">return</span> <span class="n">standard_rotation</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">angle_of_rotation</span><span class="p">,</span> <span class="n">eci_coordinates</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="gps_frames.transforms.eci2lla" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">eci2lla</span><span class="p">(</span><span class="n">eci_coordinates</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Transform the ECI coordinates into an LLA position.</p>
<p>The purpose of this function is to transform ECI coordinates into LLA
coordinates. It does to by calling <code>eci2ecef()</code> and <code>ecef2lla()</code></p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>eci_coordinates</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ECI coordinates</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time</code>
            </td>
            <td>
                  <code><span title="gps_time.GPSTime">GPSTime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time for which to get the LLA</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Latitude, Longitude, Altitude coordinates (WGS84)</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>eci2ecef: Convert coordinates (and time) to ECEF frame
ecef2lla: Convert ECEF coordinates to LLA position</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>gps_frames/transforms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jit</span><span class="p">(</span><span class="s2">&quot;float64[:](float64[:], float64)&quot;</span><span class="p">,</span> <span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">eci2lla</span><span class="p">(</span><span class="n">eci_coordinates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="n">GPSTime</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transform the ECI coordinates into an LLA position.</span>

<span class="sd">    The purpose of this function is to transform ECI coordinates into LLA</span>
<span class="sd">    coordinates. It does to by calling `eci2ecef()` and `ecef2lla()`</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    eci_coordinates : np.ndarray</span>
<span class="sd">        The ECI coordinates</span>
<span class="sd">    time : GPSTime</span>
<span class="sd">        The time for which to get the LLA</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The Latitude, Longitude, Altitude coordinates (WGS84)</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    eci2ecef: Convert coordinates (and time) to ECEF frame</span>
<span class="sd">    ecef2lla: Convert ECEF coordinates to LLA position</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ecef2lla</span><span class="p">(</span><span class="n">eci2ecef</span><span class="p">(</span><span class="n">eci_coordinates</span><span class="p">,</span> <span class="n">time</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="gps_frames.transforms.lla2ecef" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">lla2ecef</span><span class="p">(</span><span class="n">lla_coordinates</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Convert LLA to ECEF position.</p>
<p>Computes the ECEF position based on the WGS84 ellipsoid latitude,
longitude, and altitude. The inputs is are numpy arrays. Returns a
numpy array with columns representing the ECEF positions of the
elements of the inputs. From [1]_</p>
<p>Let <span class="arithmatex">\(\lambda\)</span>, <span class="arithmatex">\(\phi\)</span>, <span class="arithmatex">\(h\)</span>, <span class="arithmatex">\(a\)</span>, and <span class="arithmatex">\(e\)</span> be the latitude,
longitude, altitude, WGS84 semi-major axis, and WGS84 eccentricity,
repsectively. The effective radius of the Earth is</p>
<div class="arithmatex">\[
    n = \frac{a}{\sqrt{1 - (e\sin\lambda)^{2}}}
\]</div>
<p>From this, the ECEF <span class="arithmatex">\(x\)</span>, <span class="arithmatex">\(y\)</span>, and <span class="arithmatex">\(z\)</span> positions can be computed as</p>
<div class="arithmatex">\[
    \begin{split}
        x = &amp; (n + h)\cos\lambda\cos\phi \\
        y = &amp; (n + h)\cos\lambda\sin\phi \\
        z = &amp; \left(n\left(1 - e^{2}\right) + h\right) \sin\lambda
    \end{split}
\]</div>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lla_coordinates</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The WGS 84 latitude, longitude, and altitude (in that order)</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The ECEF position of the given WGS84 LLA</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="references" open>
  <summary>References</summary>
  <p>.. [1] G. Xu and Y. Xu, "GPS: Theory, Algorithms and Applications" 3rd ed.
    https://doi.org/10.1007/978-3-662-50367-6</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>gps_frames/transforms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jit</span><span class="p">(</span><span class="s2">&quot;float64[:](float64[:])&quot;</span><span class="p">,</span> <span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">lla2ecef</span><span class="p">(</span><span class="n">lla_coordinates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
<span class="w">    </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Convert LLA to ECEF position.</span>

<span class="sd">    Computes the ECEF position based on the WGS84 ellipsoid latitude,</span>
<span class="sd">    longitude, and altitude. The inputs is are numpy arrays. Returns a</span>
<span class="sd">    numpy array with columns representing the ECEF positions of the</span>
<span class="sd">    elements of the inputs. From [1]_</span>

<span class="sd">    Let \(\lambda\), \(\phi\), \(h\), \(a\), and \(e\) be the latitude,</span>
<span class="sd">    longitude, altitude, WGS84 semi-major axis, and WGS84 eccentricity,</span>
<span class="sd">    repsectively. The effective radius of the Earth is</span>

<span class="sd">    $$</span>
<span class="sd">        n = \frac{a}{\sqrt{1 - (e\sin\lambda)^{2}}}</span>
<span class="sd">    $$</span>

<span class="sd">    From this, the ECEF \(x\), \(y\), and \(z\) positions can be computed as</span>

<span class="sd">    $$</span>
<span class="sd">        \begin{split}</span>
<span class="sd">            x = &amp; (n + h)\cos\lambda\cos\phi \\</span>
<span class="sd">            y = &amp; (n + h)\cos\lambda\sin\phi \\</span>
<span class="sd">            z = &amp; \left(n\left(1 - e^{2}\right) + h\right) \sin\lambda</span>
<span class="sd">        \end{split}</span>
<span class="sd">    $$</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    lla_coordinates : np.ndarray</span>
<span class="sd">        The WGS 84 latitude, longitude, and altitude (in that order)</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The ECEF position of the given WGS84 LLA</span>

<span class="sd">    References</span>
<span class="sd">    ----------</span>
<span class="sd">    .. [1] G. Xu and Y. Xu, &quot;GPS: Theory, Algorithms and Applications&quot; 3rd ed.</span>
<span class="sd">        https://doi.org/10.1007/978-3-662-50367-6</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">latitude</span> <span class="o">=</span> <span class="n">lla_coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">longitude</span> <span class="o">=</span> <span class="n">lla_coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">altitude</span> <span class="o">=</span> <span class="n">lla_coordinates</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

    <span class="n">n</span> <span class="o">=</span> <span class="n">_wgs84a</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="n">_wgs84ecc</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">latitude</span><span class="p">))</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>

    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="n">altitude</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">latitude</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">longitude</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="n">altitude</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">latitude</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">longitude</span><span class="p">)</span>
    <span class="n">z</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">_wgs84ecc</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="n">altitude</span><span class="p">)</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">latitude</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="gps_frames.transforms.lla2eci" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">lla2eci</span><span class="p">(</span><span class="n">lla_coordinates</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Tranform LLA coordinates into ECI.</p>
<p>This function is used to transform an LLA position into ECI coordinates.
To do this, the coordinates are first converted to ECEF coordinates using
<code>lla2ecef()</code>. Then, these new ECEF coordinates are transformed into ECI
coordinates using <code>ecef2eci()</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>lla_coordinates</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The Latitude, Longitude, Altitude position coordinates</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time</code>
            </td>
            <td>
                  <code><span title="gps_time.GPSTime">GPSTime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time at which the <code>lla_coordinates</code> are defined</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position in the ECI frame</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>lla2ecef: Convert LLA coordinates to ECEF coordinates
ecef2eci: Convert ECEF coordinates into ECI coordinates</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>gps_frames/transforms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@jit</span><span class="p">(</span><span class="s2">&quot;float64[:](float64[:], float64)&quot;</span><span class="p">,</span> <span class="n">nopython</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span><span class="w"> </span><span class="nf">lla2eci</span><span class="p">(</span><span class="n">lla_coordinates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Tranform LLA coordinates into ECI.</span>

<span class="sd">    This function is used to transform an LLA position into ECI coordinates.</span>
<span class="sd">    To do this, the coordinates are first converted to ECEF coordinates using</span>
<span class="sd">    `lla2ecef()`. Then, these new ECEF coordinates are transformed into ECI</span>
<span class="sd">    coordinates using `ecef2eci()`.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    lla_coordinates : np.ndarray</span>
<span class="sd">        The Latitude, Longitude, Altitude position coordinates</span>
<span class="sd">    time : GPSTime</span>
<span class="sd">        The time at which the `lla_coordinates` are defined</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The position in the ECI frame</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    lla2ecef: Convert LLA coordinates to ECEF coordinates</span>
<span class="sd">    ecef2eci: Convert ECEF coordinates into ECI coordinates</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">ecef2eci</span><span class="p">(</span><span class="n">lla2ecef</span><span class="p">(</span><span class="n">lla_coordinates</span><span class="p">),</span> <span class="n">time</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="gps_frames.transforms.position_transform" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">position_transform</span><span class="p">(</span><span class="n">from_frame</span><span class="p">,</span> <span class="n">to_frame</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Convert a position from one frame to another.</p>
<p>The purpose of this function is to create a general tool to convert a
position from one frame to another. The current frame is given as the
<code>from_frame</code> and the desired new output frame is given as the <code>to_frame</code>.
The position is defined in the <code>from_frame</code> as the <code>coordinates</code>. The
<code>time</code> is used to define the time of the frame, as some conversions
between frames vary with time, e.g. ECEF to ECI.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>from_frame</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The frame in which the input coordinates are defined</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>to_frame</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The frame that the coordinates should be provided in</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>coordinates</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the <code>from_frame</code></p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time</code>
            </td>
            <td>
                  <code><span title="gps_time.GPSTime">GPSTime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time at which the <code>from_frame</code> and <code>to_frame</code> are aligned.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the <code>to_frame</code></p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="NotImplementedError">NotImplementedError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>If the <code>from_frame</code> or <code>to_frame</code> are not valid frames</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>VALID_FRAMES: A list of the valid frames for the <code>from_frame</code> and
    <code>to_frame</code> args</p>
</details>

<details class="note" open>
  <summary>Notes</summary>
  <p>This function is used to transform a position in one frame to another. The
time is the same for both the <code>from_frame</code> and <code>to_frame</code></p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>gps_frames/transforms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">position_transform</span><span class="p">(</span>
    <span class="n">from_frame</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">to_frame</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="n">GPSTime</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a position from one frame to another.</span>

<span class="sd">    The purpose of this function is to create a general tool to convert a</span>
<span class="sd">    position from one frame to another. The current frame is given as the</span>
<span class="sd">    `from_frame` and the desired new output frame is given as the `to_frame`.</span>
<span class="sd">    The position is defined in the `from_frame` as the `coordinates`. The</span>
<span class="sd">    `time` is used to define the time of the frame, as some conversions</span>
<span class="sd">    between frames vary with time, e.g. ECEF to ECI.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    from_frame : str</span>
<span class="sd">        The frame in which the input coordinates are defined</span>
<span class="sd">    to_frame : str</span>
<span class="sd">        The frame that the coordinates should be provided in</span>
<span class="sd">    coordinates : np.ndarray</span>
<span class="sd">        The coordinates in the `from_frame`</span>
<span class="sd">    time : GPSTime</span>
<span class="sd">        The time at which the `from_frame` and `to_frame` are aligned.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The coordinates in the `to_frame`</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    NotImplementedError</span>
<span class="sd">        If the `from_frame` or `to_frame` are not valid frames</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    VALID_FRAMES: A list of the valid frames for the `from_frame` and</span>
<span class="sd">        `to_frame` args</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    This function is used to transform a position in one frame to another. The</span>
<span class="sd">    time is the same for both the `from_frame` and `to_frame`</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">from_frame</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_FRAMES</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;(from_frame) Unknown Frame: </span><span class="si">{</span><span class="n">from_frame</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">to_frame</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_FRAMES</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;(to_frame) Unknown Frame: </span><span class="si">{</span><span class="n">to_frame</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">from_frame</span> <span class="o">==</span> <span class="s2">&quot;LLA&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;LLA&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">coordinates</span>
        <span class="k">elif</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;ECEF&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lla2ecef</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;ECI&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lla2eci</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time_of_week</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">from_frame</span> <span class="o">==</span> <span class="s2">&quot;ECEF&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;LLA&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ecef2lla</span><span class="p">(</span><span class="n">coordinates</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;ECEF&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">coordinates</span>
        <span class="k">elif</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;ECI&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ecef2eci</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time_of_week</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">from_frame</span> <span class="o">==</span> <span class="s2">&quot;ECI&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;LLA&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">eci2lla</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time_of_week</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;ECEF&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">eci2ecef</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">time_of_week</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;ECI&quot;</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">coordinates</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">critical</span><span class="p">(</span><span class="s2">&quot;Transformation Failed. Returning input&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">coordinates</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="gps_frames.transforms.rotate_ecef" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">rotate_ecef</span><span class="p">(</span><span class="n">old_time</span><span class="p">,</span> <span class="n">new_time</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Rotate the coordinates in one ECEF frame to a new ECEF frame.</p>
<p>Because the Earth is rotating, the ECEF frame is constantly moving and the
coordinates in the ECEF frame at one time are different than the
coordinates at some other time. This function uses the time between
<code>old_time</code> and <code>new_time</code> to determine how much the ECEF frame rotates and
updates the coordinates accordingly.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>old_time</code>
            </td>
            <td>
                  <code><span title="gps_time.GPSTime">GPSTime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time for the ECEF frame where the <code>coordinates</code> are defined</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>new_time</code>
            </td>
            <td>
                  <code><span title="gps_time.GPSTime">GPSTime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time of the new ECEF frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>coordinates</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the <code>old_time</code> ECEF frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The coordinates in the <code>new_time</code> ECEF frame</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="see-also" open>
  <summary>See Also</summary>
  <p>standard_rotation_matrix: Used to get the rotation matrix for the
    transformation</p>
</details>

            <details class="mkdocstrings-source">
              <summary>Source code in <code>gps_frames/transforms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">611</span>
<span class="normal">612</span>
<span class="normal">613</span>
<span class="normal">614</span>
<span class="normal">615</span>
<span class="normal">616</span>
<span class="normal">617</span>
<span class="normal">618</span>
<span class="normal">619</span>
<span class="normal">620</span>
<span class="normal">621</span>
<span class="normal">622</span>
<span class="normal">623</span>
<span class="normal">624</span>
<span class="normal">625</span>
<span class="normal">626</span>
<span class="normal">627</span>
<span class="normal">628</span>
<span class="normal">629</span>
<span class="normal">630</span>
<span class="normal">631</span>
<span class="normal">632</span>
<span class="normal">633</span>
<span class="normal">634</span>
<span class="normal">635</span>
<span class="normal">636</span>
<span class="normal">637</span>
<span class="normal">638</span>
<span class="normal">639</span>
<span class="normal">640</span>
<span class="normal">641</span>
<span class="normal">642</span>
<span class="normal">643</span>
<span class="normal">644</span>
<span class="normal">645</span>
<span class="normal">646</span>
<span class="normal">647</span>
<span class="normal">648</span>
<span class="normal">649</span>
<span class="normal">650</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">rotate_ecef</span><span class="p">(</span>
    <span class="n">old_time</span><span class="p">:</span> <span class="n">GPSTime</span><span class="p">,</span> <span class="n">new_time</span><span class="p">:</span> <span class="n">GPSTime</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Rotate the coordinates in one ECEF frame to a new ECEF frame.</span>

<span class="sd">    Because the Earth is rotating, the ECEF frame is constantly moving and the</span>
<span class="sd">    coordinates in the ECEF frame at one time are different than the</span>
<span class="sd">    coordinates at some other time. This function uses the time between</span>
<span class="sd">    `old_time` and `new_time` to determine how much the ECEF frame rotates and</span>
<span class="sd">    updates the coordinates accordingly.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    old_time : GPSTime</span>
<span class="sd">        The time for the ECEF frame where the `coordinates` are defined</span>
<span class="sd">    new_time : GPSTime</span>
<span class="sd">        The time of the new ECEF frame</span>
<span class="sd">    coordinates : np.ndarray</span>
<span class="sd">        The coordinates in the `old_time` ECEF frame</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The coordinates in the `new_time` ECEF frame</span>

<span class="sd">    See Also</span>
<span class="sd">    --------</span>
<span class="sd">    standard_rotation_matrix: Used to get the rotation matrix for the</span>
<span class="sd">        transformation</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">time_delta</span> <span class="o">=</span> <span class="n">new_time</span> <span class="o">-</span> <span class="n">old_time</span>
    <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">time_delta</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>

    <span class="n">angle_delta</span> <span class="o">=</span> <span class="n">_w_e</span> <span class="o">*</span> <span class="n">time_delta</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coordinates</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>

    <span class="c1"># rotation = Rotation(dcm=standard_rotation_matrix(3, angle_delta))</span>

    <span class="k">return</span> <span class="n">standard_rotation</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">angle_delta</span><span class="p">,</span> <span class="n">coordinates</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="gps_frames.transforms.velocity_transform" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">velocity_transform</span><span class="p">(</span><span class="n">from_frame</span><span class="p">,</span> <span class="n">to_frame</span><span class="p">,</span> <span class="n">position_coordinates</span><span class="p">,</span> <span class="n">velocity_components</span><span class="p">,</span> <span class="n">time</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Transform velocity from one frame to another.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>from_frame</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The starting frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>to_frame</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The desired frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>position_coordinates</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The position coordinates in the starting frame</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>velocity_components</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The velocity components in the starting from</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>time</code>
            </td>
            <td>
                  <code><span title="gps_time.GPSTime">GPSTime</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The time that the transformation is taking place</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>The velocity components in the destination frame</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="ValueError">ValueError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Does not work with the 'LLA' frame, so raises an error if the to_frame
or from_frame are specified as 'LLA'. Will also raise if the to_frame
or from_frame are not valid frames.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="mkdocstrings-source">
              <summary>Source code in <code>gps_frames/transforms.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">velocity_transform</span><span class="p">(</span>
    <span class="n">from_frame</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">to_frame</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">position_coordinates</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">velocity_components</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
    <span class="n">time</span><span class="p">:</span> <span class="n">GPSTime</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Transform velocity from one frame to another.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    from_frame : str</span>
<span class="sd">        The starting frame</span>
<span class="sd">    to_frame : str</span>
<span class="sd">        The desired frame</span>
<span class="sd">    position_coordinates : np.ndarray</span>
<span class="sd">        The position coordinates in the starting frame</span>
<span class="sd">    velocity_components : np.ndarray</span>
<span class="sd">        The velocity components in the starting from</span>
<span class="sd">    time : GPSTime</span>
<span class="sd">        The time that the transformation is taking place</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    np.ndarray</span>
<span class="sd">        The velocity components in the destination frame</span>

<span class="sd">    Raises</span>
<span class="sd">    ------</span>
<span class="sd">    ValueError</span>
<span class="sd">        Does not work with the &#39;LLA&#39; frame, so raises an error if the to_frame</span>
<span class="sd">        or from_frame are specified as &#39;LLA&#39;. Will also raise if the to_frame</span>
<span class="sd">        or from_frame are not valid frames.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">position_coordinates</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">position_coordinates</span><span class="p">)</span>
    <span class="n">velocity_components</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">velocity_components</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">from_frame</span> <span class="o">==</span> <span class="s2">&quot;LLA&quot;</span> <span class="ow">or</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;LLA&quot;</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;from_frame and to_frame cannot be LLA&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">from_frame</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_FRAMES</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;from_frame (</span><span class="si">{</span><span class="n">from_frame</span><span class="si">}</span><span class="s2">) not valid&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">to_frame</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">VALID_FRAMES</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;to_frame (</span><span class="si">{</span><span class="n">to_frame</span><span class="si">}</span><span class="s2">) not valid&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">from_frame</span> <span class="o">==</span> <span class="s2">&quot;ECEF&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;ECEF&quot;</span><span class="p">:</span>
            <span class="n">angle_of_rotation</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">rotation_rate</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">elif</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;ECI&quot;</span><span class="p">:</span>
            <span class="n">angle_of_rotation</span> <span class="o">=</span> <span class="o">-</span><span class="n">_w_e</span> <span class="o">*</span> <span class="n">time</span><span class="o">.</span><span class="n">time_of_week</span>
            <span class="n">rotation_rate</span> <span class="o">=</span> <span class="o">-</span><span class="n">_w_e</span>
    <span class="k">elif</span> <span class="n">from_frame</span> <span class="o">==</span> <span class="s2">&quot;ECI&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;ECEF&quot;</span><span class="p">:</span>
            <span class="n">angle_of_rotation</span> <span class="o">=</span> <span class="n">_w_e</span> <span class="o">*</span> <span class="n">time</span><span class="o">.</span><span class="n">time_of_week</span>
            <span class="n">rotation_rate</span> <span class="o">=</span> <span class="n">_w_e</span>
        <span class="k">elif</span> <span class="n">to_frame</span> <span class="o">==</span> <span class="s2">&quot;ECI&quot;</span><span class="p">:</span>
            <span class="n">angle_of_rotation</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">rotation_rate</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="n">rotation</span> <span class="o">=</span> <span class="n">Rotation</span><span class="p">(</span><span class="n">dcm</span><span class="o">=</span><span class="n">standard_rotation_matrix</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">angle_of_rotation</span><span class="p">))</span>
    <span class="n">rate_matrix</span> <span class="o">=</span> <span class="n">standard_rotation_matrix_rates</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">angle_of_rotation</span><span class="p">,</span> <span class="n">rotation_rate</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">rotation</span><span class="o">.</span><span class="n">rotate</span><span class="p">(</span><span class="n">velocity_components</span><span class="p">)</span> <span class="o">+</span> <span class="n">rate_matrix</span> <span class="o">@</span> <span class="n">position_coordinates</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.sections", "navigation.indexes"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>